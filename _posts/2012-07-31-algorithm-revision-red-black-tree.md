---
layout: post
title: "Algorithm Revision: Red Black Tree"
description: ""
tags: [algorithme, learning notes]
---

## 2-3-4 树 ##

要说红黑树(RBT), 就要从2-3-4树说起. 234树是一种绝对平衡的查找树, 每个叶子节点到根的距离是相同的(深度). 他的节点分为三种:

 + __2节点__: 有两个孩子的节点, 和BST中的相同
 + __3节点__: 有三个孩子的节点, 同时节点中有两个值, 从小到大排列. 其左子树含有的是小于节点左值的元素, 右子树含有大于节点右值的元素
 + __4节点__: 和3节点类似, 但是有四个孩子, 节点中有三个值. 中间的两个子树分别含有大小介于节点左值和中值, 介于中值和右值的元素

234树长得像这个样子(图片借用Segewick爷爷的):

![](/images/2012-08/RB-234tree-1.png)

### 查找和插入 ###

在234树上的查找和BST相同, 只不过在每个节点中可能要查看多个元素.
插入操作先查找需要插入的值, 如果该值不存在, 那么在叶子节点处插入. 当插入的节点是2节点或3节点的时候, 我们可以直接将新值插入, 使该节点变成3节点或4节点. 但是如果被插入的节点已经是4节点, 就需要预先分割节点.

![](/images/2012-08/RB-234tree-2.png)

根据上层节点的不同(是2节点还是3节点), 分割的方法也分为两种. 分割之后即可简单的插入新值.

### 性能和不足 ###

234树的高度始终是`\(O(lg(n))\)`的, 所以能够保证其上的各种操作都是`\(lg\)`时间的.
但是234树的实现比较复杂, 特别是每个节点的结构不同而且在插入操作的时候需要进行节点转换. 在建立234树的时候分割节点的操作也很频繁. 所以Segewick爷爷就发明了红黑树, 一种用BST结构来实现的234树.

## 红黑树 ##

参考[一][1]

   [1]: http://www.cs.princeton.edu/~rs/talks/LLRB/RedBlack.pdf
